<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alƒ±≈üveri≈ü Asistanƒ±m</title>
  <style>
    :root {
      --bg: #f4f5fb;
      --primary: #4f46e5;
      --primary-soft: #e0e7ff;
      --danger: #f97373;
      --accent: #22c55e;
      --border: #e5e7eb;
      --text-main: #111827;
      --text-muted: #6b7280;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at top, #e0f2fe, #eef2ff 40%, #e5e7eb);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      color: var(--text-main);
    }

    .app-shell {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .card {
      width: 100%;
      max-width: 520px;
      background: #ffffff;
      border-radius: 18px;
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.18);
      padding: 16px 16px 18px;
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at top left, #4f46e515, transparent 70%);
      pointer-events: none;
    }

    .card-inner {
      position: relative;
      z-index: 1;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }

    .title-box {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      background: linear-gradient(135deg, #4f46e5, #22c55e);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 22px;
      box-shadow: 0 8px 18px rgba(79, 70, 229, 0.5);
    }

    .title-text h1 {
      font-size: 18px;
      margin: 0;
    }

    .title-text span {
      display: block;
      font-size: 12px;
      color: var(--text-muted);
    }

    .badge {
      padding: 4px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: #ecfdf3;
      color: #16a34a;
      border: 1px solid #bbf7d0;
      display: flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
    }

    .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 5px rgba(34, 197, 94, 0.25);
    }

    .categories {
      display: flex;
      gap: 6px;
      margin-bottom: 12px;
      overflow-x: auto;
      padding-bottom: 4px;
    }

    .cat-btn {
      border-radius: 999px;
      border: 1px solid var(--border);
      padding: 5px 10px;
      font-size: 12px;
      background: #f9fafb;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      flex-shrink: 0;
    }

    .cat-btn span.emoji {
      font-size: 14px;
    }

    .cat-btn.active {
      background: var(--primary-soft);
      color: var(--primary);
      border-color: #c7d2fe;
      box-shadow: 0 0 0 1px #e0e7ff;
    }

    .inputs {
      display: flex;
      gap: 6px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .inputs input {
      padding: 8px 9px;
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 13px;
      flex: 1 1 100px;
      min-width: 0;
    }

    .inputs input:focus {
      outline: 2px solid #e0e7ff;
      border-color: #818cf8;
    }

    .inputs button {
      border: none;
      border-radius: 12px;
      padding: 8px 16px;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      color: #fff;
      font-weight: 600;
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      box-shadow: 0 7px 16px rgba(22, 163, 74, 0.4);
    }

    .inputs button:active {
      transform: translateY(1px);
      box-shadow: 0 4px 10px rgba(22, 163, 74, 0.3);
    }

    .list {
      border-radius: 14px;
      border: 1px solid var(--border);
      background: #f9fafb;
      padding: 6px;
      max-height: 260px;
      overflow-y: auto;
    }

    .empty-state {
      text-align: center;
      font-size: 12px;
      color: var(--text-muted);
      padding: 16px 6px;
    }

    .item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 4px;
      border-radius: 10px;
      transition: background 0.15s, transform 0.1s;
    }

    .item:not(:last-child) {
      border-bottom: 1px dashed #e5e7eb;
    }

    .item:hover {
      background: #eef2ff;
      transform: translateY(-1px);
    }

    .checkbox {
      flex-shrink: 0;
    }

    .checkbox input {
      width: 18px;
      height: 18px;
    }

    .item-main {
      flex: 1;
      min-width: 0;
    }

    .item-name {
      font-size: 13px;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 4px;
    }

    .item-name span.label.done {
      text-decoration: line-through;
      color: var(--text-muted);
    }

    .item-tag {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: #eef2ff;
      color: #4f46e5;
      flex-shrink: 0;
      white-space: nowrap;
    }

    .item-sub {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
      display: flex;
      justify-content: space-between;
      gap: 6px;
    }

    .item-actions {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-left: 4px;
    }

    .item-actions button {
      border: none;
      background: transparent;
      font-size: 16px;
      line-height: 1;
      padding: 0 3px;
      cursor: pointer;
    }

    .item-actions button.delete {
      color: var(--danger);
    }

    .item-actions button.edit {
      color: #6b7280;
      font-size: 13px;
    }

    .footer {
      margin-top: 10px;
      font-size: 12px;
    }

    .totals-row {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .totals-card {
      flex: 1;
      min-width: 0;
      border-radius: 12px;
      padding: 8px 10px;
      background: #f9fafb;
      border: 1px solid var(--border);
    }

    .totals-card h4 {
      margin: 0 0 4px;
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    .totals-card strong {
      font-size: 14px;
    }

    .actions-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .actions-row button {
      flex: 1;
      border-radius: 999px;
      border: none;
      padding: 7px 8px;
      font-size: 11px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    .btn-clear {
      background: #f3f4f6;
      color: #4b5563;
    }

    .btn-done {
      background: #fef9c3;
      color: #854d0e;
    }

    .global-total {
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-muted);
      text-align: right;
    }

    /* Splash screen */
    .splash {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, #4f46e5, #0f172a);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      color: white;
      z-index: 999;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .splash.hidden {
      opacity: 0;
      visibility: hidden;
    }

    .splash-logo {
      width: 90px;
      height: 90px;
      border-radius: 30px;
      background: rgba(15, 23, 42, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 42px;
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45);
      animation: pulse 1.3s infinite;
    }

    .splash-title {
      margin-top: 16px;
      font-size: 20px;
      font-weight: 600;
    }

    .splash-sub {
      margin-top: 4px;
      font-size: 12px;
      opacity: 0.8;
    }

    .splash-btn {
      margin-top: 18px;
      padding: 8px 18px;
      border-radius: 999px;
      border: none;
      background: white;
      color: #4f46e5;
      font-size: 13px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 28px rgba(15, 23, 42, 0.6);
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.08);
      }
      100% {
        transform: scale(1);
      }
    }

    @media (max-width: 400px) {
      .card {
        padding: 12px 12px 16px;
      }
      header {
        align-items: flex-start;
      }
      .inputs {
        flex-direction: column;
      }
      .inputs button {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <!-- Splash ekranƒ± -->
  <div class="splash" id="splash">
    <div class="splash-logo">üõçÔ∏è</div>
    <div class="splash-title">Alƒ±≈üveri≈ü Asistanƒ±m</div>
    <div class="splash-sub">Market ‚Ä¢ Eczane ‚Ä¢ Ev ‚Ä¢ Teknoloji</div>
    <button class="splash-btn" onclick="hideSplash()">
      Ba≈üla
      <span>‚ûú</span>
    </button>
  </div>

  <div class="app-shell">
    <div class="card">
      <div class="card-inner">
        <header>
          <div class="title-box">
            <div class="logo">üõí</div>
            <div class="title-text">
              <h1>Alƒ±≈üveri≈ü Asistanƒ±m</h1>
              <span>Liste yap, harcamanƒ± kontrol et.</span>
            </div>
          </div>
          <div class="badge">
            <span class="badge-dot"></span>
            Kayƒ±tlar saklanƒ±yor
          </div>
        </header>

        <!-- Kategoriler -->
        <div class="categories" id="categories"></div>

        <!-- Giri≈ü alanƒ± -->
        <div class="inputs">
          <input id="name" placeholder="√úr√ºn adƒ± (√∂r. S√ºt)" />
          <input
            id="qty"
            type="number"
            min="1"
            value="1"
            style="max-width: 60px"
          />
          <input
            id="price"
            type="number"
            min="0"
            step="0.01"
            placeholder="Fiyat (TL)"
            style="max-width: 90px"
          />
          <button onclick="addItem()">
            ‚ûï Ekle
          </button>
        </div>

        <!-- Liste -->
        <div class="list" id="list"></div>

        <!-- Alt b√∂l√ºm -->
        <div class="footer">
          <div class="totals-row">
            <div class="totals-card">
              <h4>Se√ßili kategori</h4>
              <strong id="catTotal">0.00 TL</strong>
              <div style="font-size: 11px; color: var(--text-muted);">
                Alƒ±nan: <span id="catDone">0.00 TL</span>
              </div>
            </div>
            <div class="totals-card">
              <h4>Genel toplam</h4>
              <strong id="globalTotal">0.00 TL</strong>
              <div style="font-size: 11px; color: var(--text-muted);">
                T√ºm kategoriler
              </div>
            </div>
          </div>

          <div class="actions-row">
            <button class="btn-clear" onclick="clearCurrentCategory()">
              üßπ Sadece bu kategoriyi temizle
            </button>
            <button class="btn-done" onclick="removeDone()">
              ‚úÖ Alƒ±nanlarƒ± kaldƒ±r
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Kategoriler
    const categories = [
      { id: "market", label: "Market", emoji: "üõí" },
      { id: "eczane", label: "Eczane", emoji: "üíä" },
      { id: "ev", label: "Ev", emoji: "üè†" },
      { id: "teknoloji", label: "Teknoloji", emoji: "üíª" },
      { id: "diger", label: "Diƒüer", emoji: "‚ú®" }
    ];

    let items = [];
    let currentCategory = "market";

    const LS_KEY = "alisveris_asistan_v1";

    function saveState() {
      const payload = {
        items,
        currentCategory
      };
      localStorage.setItem(LS_KEY, JSON.stringify(payload));
    }

    function loadState() {
      try {
        const raw = localStorage.getItem(LS_KEY);
        if (!raw) return;
        const data = JSON.parse(raw);
        if (Array.isArray(data.items)) items = data.items;
        if (data.currentCategory) currentCategory = data.currentCategory;
      } catch (e) {
        console.warn("loadState error", e);
      }
    }

    function formatTL(num) {
      return num.toFixed(2).replace(".", ",") + " TL";
    }

    // Kategori butonlarƒ±nƒ± √ßiz
    function renderCategories() {
      const container = document.getElementById("categories");
      container.innerHTML = "";
      categories.forEach((cat) => {
        const btn = document.createElement("button");
        btn.className =
          "cat-btn" + (cat.id === currentCategory ? " active" : "");
        btn.onclick = () => {
          currentCategory = cat.id;
          saveState();
          render();
        };
        const emojiSpan = document.createElement("span");
        emojiSpan.className = "emoji";
        emojiSpan.textContent = cat.emoji;
        const labelSpan = document.createElement("span");
        labelSpan.textContent = cat.label;
        btn.appendChild(emojiSpan);
        btn.appendChild(labelSpan);
        container.appendChild(btn);
      });
    }

    // Listeyi √ßiz
    function render() {
      renderCategories();

      const listEl = document.getElementById("list");
      listEl.innerHTML = "";

      const filtered = items.filter((it) => it.category === currentCategory);

      let catTotal = 0;
      let catDone = 0;
      let globalTotal = 0;

      items.forEach((it) => {
        if (it.price) {
          const t = it.price * it.qty;
          globalTotal += t;
          if (it.category === currentCategory) {
            catTotal += t;
            if (it.done) catDone += t;
          }
        }
      });

      if (!filtered.length) {
        const empty = document.createElement("div");
        empty.className = "empty-state";
        empty.textContent = "Bu kategoride hen√ºz √ºr√ºn yok. Hadi birka√ß tane ekleyelim.";
        listEl.appendChild(empty);
      } else {
        filtered.forEach((item) => {
          const index = items.indexOf(item);
          const row = document.createElement("div");
          row.className = "item";

          const checkbox = document.createElement("div");
          checkbox.className = "checkbox";
          const cb = document.createElement("input");
          cb.type = "checkbox";
          cb.checked = item.done;
          cb.onchange = () => toggleDone(index);
          checkbox.appendChild(cb);

          const main = document.createElement("div");
          main.className = "item-main";

          const nameRow = document.createElement("div");
          nameRow.className = "item-name";
          const label = document.createElement("span");
          label.className = "label" + (item.done ? " done" : "");
          label.textContent = `${item.name} √ó${item.qty}`;
          nameRow.appendChild(label);

          const tag = document.createElement("span");
          tag.className = "item-tag";
          const catInfo = categories.find((c) => c.id === item.category);
          tag.textContent = catInfo ? catInfo.label : "Kategori";
          nameRow.appendChild(tag);

          const sub = document.createElement("div");
          sub.className = "item-sub";
          const pricePart = document.createElement("span");
          if (item.price) {
            pricePart.textContent = `${formatTL(item.price)} ‚Ä¢ Toplam: ${formatTL(
              item.price * item.qty
            )}`;
          } else {
            pricePart.textContent = "Fiyat girilmedi";
          }
          const note = document.createElement("span");
          note.textContent = item.done ? "Alƒ±ndƒ±" : "Alƒ±nmadƒ±";
          sub.appendChild(pricePart);
          sub.appendChild(note);

          main.appendChild(nameRow);
          main.appendChild(sub);

          const actions = document.createElement("div");
          actions.className = "item-actions";
          const delBtn = document.createElement("button");
          delBtn.className = "delete";
          delBtn.textContent = "‚úï";
          delBtn.title = "Sil";
          delBtn.onclick = () => deleteItem(index);
          actions.appendChild(delBtn);

          row.appendChild(checkbox);
          row.appendChild(main);
          row.appendChild(actions);

          listEl.appendChild(row);
        });
      }

      document.getElementById("catTotal").textContent = formatTL(catTotal);
      document.getElementById("catDone").textContent = formatTL(catDone);
      document.getElementById("globalTotal").textContent = formatTL(globalTotal);
    }

    function addItem() {
      const nameInput = document.getElementById("name");
      const qtyInput = document.getElementById("qty");
      const priceInput = document.getElementById("price");

      const name = nameInput.value.trim();
      if (!name) return;

      const qty = parseInt(qtyInput.value, 10) || 1;
      const priceVal = priceInput.value.replace(",", ".");
      const price = priceVal ? parseFloat(priceVal) : null;

      items.push({
        name,
        qty,
        price: isNaN(price) ? null : price,
        done: false,
        category: currentCategory
      });

      nameInput.value = "";
      qtyInput.value = "1";
      priceInput.value = "";

      saveState();
      render();
      nameInput.focus();
    }

    function toggleDone(index) {
      items[index].done = !items[index].done;
      saveState();
      render();
    }

    function deleteItem(index) {
      items.splice(index, 1);
      saveState();
      render();
    }

    function clearCurrentCategory() {
      items = items.filter((it) => it.category !== currentCategory);
      saveState();
      render();
    }

    function removeDone() {
      items = items.filter((it) => !it.done);
      saveState();
      render();
    }

    // Splash kontrol
    function hideSplash() {
      const splash = document.getElementById("splash");
      splash.classList.add("hidden");
    }

    window.addEventListener("load", () => {
      loadState();
      render();
      // otomatik kaybolsun
      setTimeout(() => {
        hideSplash();
      }, 1200);
      // Enter ile ekleme
      document
        .getElementById("name")
        .addEventListener("keydown", (e) => e.key === "Enter" && addItem());
      document
        .getElementById("price")
        .addEventListener("keydown", (e) => e.key === "Enter" && addItem());
    });
  </script>
</body>
</html>
